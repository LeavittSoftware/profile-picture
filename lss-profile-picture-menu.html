<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../polymer-decorators/polymer-decorators.html">

<!-- Mixins -->
<link rel="import" href="../lazy-imports/lazy-imports-mixin.html">
<link rel="import" href="../polymer/lib/mixins/gesture-event-listeners.html">
<link rel="import" href="../lss-user-manager/authenticated-person-behavior.html">

<link rel="import" href="../paper-dialog/paper-dialog.html">

<link rel="import" href="./lss-profile-picture.html">

<dom-module id="lss-profile-picture-menu">
	<link rel="lazy-import" group="menu" href="../paper-button/paper-button.html">
	<template>
		<style>
			paper-dialog {
				min-width: 305px;
				margin: 2px 0 0 0;
			}

			dialog-content {
				@apply --layout-flex;
				@apply --layout-vertical;
				padding: 8px !important;
				margin: 0 !important;
			}

			up-arrow {
				width: 0;
				height: 0;
				position: absolute;
				top: -10px;
				border-left: 10px solid transparent;
				border-right: 10px solid transparent;
				border-bottom: 10px solid white;
			}

			conent-container {
				@apply --layout-vertical;
			}

			content-head {
				@apply --layout-horizontal;
			}

			user-info {
				@apply --layout-vertical;
				@apply --layout-flex;
				padding: 8px;
			}

			user-info user-name {
				@apply --paper-font-subhead;
				font-weight: bold;
			}

			user-info user-company {
				color: #666;
			}

			user-info paper-button {
				margin-top: 32px;
				margin-bottom: 32px;
				width: 125px;
			}

			lss-profile-picture {
				@apply --layout-vertical;
			}

			action-buttons {
				margin-top: 8px;
				@apply --layout-horizontal;
				@apply --layout-end-justified;
			}

			paper-button {
				background-color: var(--lss-profile-picture-logout-button-background-color, #fff);
				color: var(--lss-profile-picture-logout-button-color, #424242);
			}

			paper-button[main-action] {
				background-color: var(--lss-profile-picture-menu-button-background-color, #2196f3);
				color: var(--lss-profile-picture-menu-button-color, #fff);
				--paper-button-raised-keyboard-focus: {
					background-color: var(--paper-pink-a200) !important;
					color: white !important;
				}
				;
			}

			[unresolved] {
				display: none;
			}
		</style>
		<lss-user-manager disableAutoload="[[disableAutoload]]" roles="{{roles}}" fullname="{{fullname}}" person-id="{{personId}}"></lss-user-manager>
		<section>
			<paper-dialog id="dialog" scroll-action="lock" unresolved no-overlap horizontal-align="right" vertical-align="top" vertical-offset="8"
			    horizontal-offset="-8">
				<dialog-content>
					<up-arrow style$="[[_calcUpArrowStyle(size)]]"></up-arrow>
					<conent-container>
						<content-head>
							<lss-profile-picture id="innerProfilePicture" person-id="[[personId]]" shape="circle" size="55"></lss-profile-picture>
							<user-info>
								<user-name>[[fullname]]</user-name>
								<user-company>Leavitt Group Account</user-company>
							</user-info>
						</content-head>
						<slot name="content"></slot>
					</conent-container>
					<action-buttons>
						<paper-button on-tap="_onLogoutTapped">Logout</paper-button>
						<slot name="accountButtonSlot">
							<paper-button main-action on-tap="_onMyAccountTapped" flat>My Account</paper-button>
						</slot>
					</action-buttons>
				</dialog-content>
			</paper-dialog>
			<lss-profile-picture person-id="[[personId]]" on-tap="_onProfilePictureTapped" id="profilePicture" shape="circle" size="[[size]]"></lss-profile-picture>
		</section>
	</template>
	<script type="text/javascript" src="lib/lss-profile-picture-menu.js">
	</script>
</dom-module>